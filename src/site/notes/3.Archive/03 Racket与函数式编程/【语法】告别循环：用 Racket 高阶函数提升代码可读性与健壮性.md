---
{"dg-publish":true,"dg-path":"03 Racketä¸å‡½æ•°å¼ç¼–ç¨‹/ã€è¯­æ³•ã€‘å‘Šåˆ«å¾ªç¯ï¼šç”¨ Racket é«˜é˜¶å‡½æ•°æå‡ä»£ç å¯è¯»æ€§ä¸å¥å£®æ€§.md","permalink":"/03 Racketä¸å‡½æ•°å¼ç¼–ç¨‹/ã€è¯­æ³•ã€‘å‘Šåˆ«å¾ªç¯ï¼šç”¨ Racket é«˜é˜¶å‡½æ•°æå‡ä»£ç å¯è¯»æ€§ä¸å¥å£®æ€§/"}
---

 #lisp/racket  

åœ¨å¾ˆå¤šä¼ ç»Ÿè¯­è¨€ï¼ˆå¦‚ Cã€Pythonã€Javaï¼‰ä¸­ï¼Œæˆ‘ä»¬ä¹ æƒ¯å†™ï¼š

- `for` / `while` å¾ªç¯
- æ‰‹åŠ¨éå†å…ƒç´ 
- æ‰‹åŠ¨ç»´æŠ¤ç´¢å¼•
- `acc = []` è¿™æ ·ä¸æ–­è¿½åŠ æ•°æ®
- å†™è®¸å¤šæ¡ä»¶åˆ†æ”¯æ¥å¤„ç†çŠ¶æ€

è€Œåœ¨ Racket ä¸­ï¼Œä½ ä¼šçœ‹åˆ°ä¸€ç§å®Œå…¨ä¸åŒçš„é£æ ¼ï¼š

> **åŒæ ·çš„ä»»åŠ¡ï¼Œç”¨ mapã€filterã€apply ç­‰é«˜é˜¶å‡½æ•°è½»æ¾å®Œæˆã€‚  
> æ— éœ€å¾ªç¯ï¼Œä¹Ÿæ— éœ€å˜é‡æ§åˆ¶çŠ¶æ€ã€‚**

ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ  
è¿™ç§å†™æ³•åˆå¥½åœ¨å“ªé‡Œï¼Ÿ  
æœ¬æ–‡ä¼šä»â€œæ€ç»´æ–¹å¼çš„å˜åŒ–â€å¼€å§‹ï¼Œå†è¯¦ç»†ä»‹ç»ä½ å¿…ä¼šçš„é«˜é˜¶å‡½æ•°ã€‚

# ğŸŒ± ä»€ä¹ˆæ˜¯é«˜é˜¶å‡½æ•°ï¼Ÿ

ä¸€å¥è¯ï¼š

> **é«˜é˜¶å‡½æ•° = å¯ä»¥æŠŠå‡½æ•°å½“ä½œå‚æ•°ä¼ å…¥çš„å‡½æ•°ã€‚**

ä¾‹å¦‚ï¼š

```racket
(map add1 '(1 2 3))
```

è¿™é‡Œ `add1` æ˜¯â€œè¢«ä¼ å…¥ map çš„å‚æ•°â€ï¼Œå°±åƒæ™®é€šå€¼ä¸€æ ·ï¼Œéå¸¸è‡ªç„¶ã€‚

## ğŸ”· map â€”â€” å¯¹æ¯ä¸ªå…ƒç´ åšè½¬æ¢

`map` å°±æ˜¯â€œæŠŠå‡½æ•°åº”ç”¨åˆ°åˆ—è¡¨çš„æ¯ä¸ªå…ƒç´ ä¸Šâ€ã€‚

### åŸºæœ¬ç¤ºä¾‹

```racket
(map add1 '(1 2 3))
;; '(2 3 4)
```

### ä½¿ç”¨åŒ¿åå‡½æ•°

```racket
(map (Î» (x) (* x x)) '(1 2 3 4))
;; '(1 4 9 16)
```

### å¤šåˆ—è¡¨å¹¶è¡Œ map

```racket
(map + '(1 2 3) '(10 20 30))
;; '(11 22 33)
```

## ğŸ”· filter â€”â€” æŒ‘å‡ºæ»¡è¶³æ¡ä»¶çš„å…ƒç´ 

```racket
(filter even? '(1 2 3 4 5 6))
;; '(2 4 6)
```

å­—ç¬¦ä¸²ç¤ºä¾‹ï¼š

```racket
(filter (Î» (s) (> (string-length s) 3))
        '("hi" "hello" "abc" "rack"))
;; '("hello" "rack")
```

## ğŸ”· apply â€”â€” æŠŠåˆ—è¡¨â€œå±•å¼€â€æˆå‡½æ•°å‚æ•°

`apply` ç”¨æ¥æ‰§è¡Œâ€œå¸¦å¯å˜å‚æ•°â€çš„å‡½æ•°éå¸¸å¥½ç”¨ã€‚

### æ±‚å’Œ

```racket
(apply + '(1 2 3 4))
;; 10
```

ç­‰ä»·äºï¼š

```racket
(+ 1 2 3 4)
```

### æ‹¼æ¥å¤šä¸ªåˆ—è¡¨

```racket
(apply append '((1 2) (3 4) (5 6)))
;; '(1 2 3 4 5 6)
```

### åŠ¨æ€å‚æ•°ï¼ˆè‡ªåŠ¨åŒ–è„šæœ¬å¸¸ç”¨ï¼‰

```racket
(define args '(1 2 3))
(apply format "~a ~a ~a" args)
;; "1 2 3"
```

## ğŸ”· foldl / foldr â€”â€” æŠŠåˆ—è¡¨â€œå‹ç¼©â€ä¸ºå•ä¸ªå€¼

æŠ˜å æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„æ ¸å¿ƒã€‚

### foldlï¼ˆä»å·¦æŠ˜å ï¼‰

```racket
(foldl + 0 '(1 2 3 4))
;; 10
```

å…¶æœ¬è´¨æ˜¯ï¼š

```
(+ (+ (+ (+ 0 1) 2) 3) 4)
```

### foldrï¼ˆä»å³æŠ˜å ï¼‰

å¸¸ç”¨äºæ„é€ ç»“æ„ï¼š

```racket
(foldr cons '() '(1 2 3))
;; '(1 2 3)
```

## ğŸ”· ormap / andmap â€”â€” ç”¨é€»è¾‘åˆ¤æ–­æ•´ä¸ªåˆ—è¡¨

### ormap

â€œåªè¦ä¸€ä¸ªæ»¡è¶³æ¡ä»¶ï¼Œå°±è¿”å› `#t`â€

```racket
(ormap even? '(1 3 5 6))
;; #t
```

### andmap

â€œæ‰€æœ‰å…ƒç´ éƒ½æ»¡è¶³æ¡ä»¶ï¼Œæ‰è¿”å› `#t`â€

```racket
(andmap number? '(1 2 3))
;; #t
```

# ğŸŒŸ ä¸ºä»€ä¹ˆè¯´â€œä»å¾ªç¯åˆ°å‡½æ•°å¼â€ï¼Ÿ

è¿™æ˜¯æ–°æ‰‹æœ€å¸¸é—®çš„é—®é¢˜ã€‚  
ä¸‹é¢ç”¨æœ€å…¸å‹çš„ä¾‹å­è¯´æ˜ã€‚

## âœ” ä¼ ç»Ÿå‘½ä»¤å¼å†™æ³•ï¼ˆåƒ C è¯­è¨€ï¼‰

```racket
(define (double-evens lst)
  (define acc '())
  (for ([x lst])
    (when (even? x)
      (set! acc (append acc (list (* x 2))))))
  acc)
```

é—®é¢˜ï¼š

1. è¦ç»´æŠ¤ `acc`
2. è¦å†™ `set!`
3. `append` æ˜¯ O(n)ï¼Œå¾ªç¯é‡Œ append ä¼šå˜ O(nÂ²)
4. é€»è¾‘æ˜¯â€œæˆ‘æ€ä¹ˆåšâ€

## âœ” Racket / å‡½æ•°å¼å†™æ³•

```racket
(map (Î» (x) (* x 2))
     (filter even? lst))
```

ä¼˜åŠ¿ï¼š

- ä¸éœ€è¦å˜é‡
- ä¸éœ€è¦æ”¹å˜çŠ¶æ€
- ä¸éœ€è¦å…³å¿ƒéå†é¡ºåº
- å†™çš„å°±æ˜¯â€œåšä»€ä¹ˆâ€

## âœ” ä¸ºä»€ä¹ˆè¿™ä¸ªé£æ ¼æ›´å¥½ï¼Ÿ

### 1. æ›´å®¹æ˜“è¯»

è¯»èµ·æ¥åƒè‡ªç„¶è¯­è¨€ï¼š

> â€œè¿‡æ»¤å¶æ•°ï¼Œå†ç¿»å€ã€‚â€

è€Œä¸æ˜¯ï¼š

> â€œæˆ‘å£°æ˜ acc å¹¶éå†æ¯ä¸ª xï¼Œç¬¦åˆæ¡ä»¶æ—¶ append...â€

### 2. æ›´å°‘ bug

æ²¡æœ‰ï¼š

- å˜é‡è¶Šç•Œ
- append ä½ç½®é”™è¯¯
- æ„å¤–æ”¹å˜çŠ¶æ€
- éå†é¡ºåºå†™é”™

### 3. æ›´å®¹æ˜“ç»„åˆ

é«˜é˜¶å‡½æ•°åƒç§¯æœ¨ï¼š

```racket
(map square (map add1 (filter even? lst)))
```

åŠŸèƒ½ç»„åˆæ¸…æ™°æ˜ç¡®ã€‚

### 4. æ›´é€‚åˆé€’å½’è¯­è¨€ Racket

Racket çš„æ ¸å¿ƒæ˜¯ï¼š

- åˆ—è¡¨å¤„ç†
- é€’å½’
- å‡½æ•°ç»„åˆ

é«˜é˜¶å‡½æ•°å’Œè¿™äº›ç‰¹æ€§å®Œç¾å¥‘åˆã€‚

# ğŸŒŸ å¸¸è§ç»„åˆæŠ€å·§

### 1. map + filter

```racket
(map add1 (filter even? '(1 2 3 4 5 6)))
;; '(3 5 7)
```

### 2. apply + mapï¼ˆçŸ©é˜µå¤„ç†å¸¸ç”¨ï¼‰

```racket
(apply map max '((1 9 3)
                 (4 2 6)
                 (7 5 0)))
;; '(7 9 6)
```

### 3. foldl æ¨¡æ‹Ÿ mapï¼ˆç†è§£ fold çš„å¥½æ–¹æ³•ï¼‰

```racket
(foldl (Î» (x acc) (cons (* x x) acc))
       '()
       '(1 2 3 4))
;; '(16 9 4 1)
```

# ğŸ æ€»ç»“

é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œä½ å·²ç»å­¦ä¼šï¼š

- ä»€ä¹ˆæ˜¯é«˜é˜¶å‡½æ•°
- map / filter ç”¨æ¥å¤„ç†åˆ—è¡¨
- apply ç”¨æ¥å±•å¼€å‚æ•°
- foldl / foldr ç”¨æ¥æŠ˜å æ•°æ®
- andmap / ormap ç”¨æ¥åšé€»è¾‘åˆ¤æ–­
- ä¸ºä»€ä¹ˆ Racket å¼ºè°ƒâ€œä»å¾ªç¯åˆ°å‡½æ•°å¼â€
- å‡½æ•°å¼å†™æ³•å¦‚ä½•æ›´å®‰å…¨ã€ç²¾ç®€ã€å¯ç»„åˆ

è¿™äº›é«˜é˜¶å‡½æ•°ä¸ä»…èƒ½è®©ä½ å†™å‡ºæ›´ä¼˜é›…çš„ Racket ä»£ç ï¼Œä¹Ÿæ˜¯èµ°å‘ï¼š

- DSLï¼ˆé¢†åŸŸè¯­è¨€ï¼‰
- å®ç¼–ç¨‹
- Web Server
- GUI åº”ç”¨
- æ¸¸æˆè„šæœ¬
- ä»£ç ç”Ÿæˆå™¨

çš„åŸºç¡€èƒ½åŠ›ã€‚