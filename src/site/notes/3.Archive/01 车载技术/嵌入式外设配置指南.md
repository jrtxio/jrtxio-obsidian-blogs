---
{"dg-publish":true,"dg-path":"01 车载技术/嵌入式外设配置指南.md","permalink":"/01 车载技术/嵌入式外设配置指南/"}
---

#Innolight

在嵌入式系统中，外设通信是至关重要的一部分。不同的外设具有不同的通信方式和配置参数，理解这些参数的配置对于系统设计至关重要。本文将介绍常见外设的通信参数配置，包括 UART、I2C、SPI、CAN、Ethernet、ADC、DAC、DMA 和 PWM。

## UART（Universal Asynchronous Receiver/Transmitter）

UART 是一种常见的异步串行通信协议，广泛用于嵌入式系统中的数据传输。

| 编号  | 配置信息 | 描述                            |
| --- | ---- | ----------------------------- |
| 1   | 波特率  | 数据传输的速率，通常为 9600、115200 等常见值。 |
| 2   | 数据位  | 每个字符的位数，通常为 7 位或 8 位。         |
| 3   | 停止位  | 停止位的数量，常见为 1 位或 2 位。          |
| 4   | 校验位  | 校验方式，可以是无校验、奇校验或偶校验。          |

UART 的配置通常在数据传输速率和校验方式之间进行选择，确保数据的可靠传输。

## I2C（Inter-Integrated Circuit）

I2C 是一种同步串行通信协议，广泛应用于低速外设（如传感器、EEPROM 等）的连接。

| 编号  | 配置信息 | 描述                                        |
| --- | ---- | ----------------------------------------- |
| 1   | 波特率  | 数据传输的速率，通常为 100kbps（标准模式）或 400kbps（快速模式）。 |
| 2   | 地址宽度 | 设备地址的位数，通常为 7 位或 10 位。                    |
| 3   | 响应超时 | 主设备在发送数据时，等待从设备响应的最大时间。                   |

I2C 是一种简单、低成本的通信协议，能够通过两根线连接多个设备。
## SPI（Serial Peripheral Interface）

SPI（串行外设接口）是一种同步的串行通信协议，广泛应用于芯片之间的高速数据传输。它采用主从模式，其中主设备控制从设备的通信。

| 编号  | 配置信息      | 描述                                                        |
| --- | --------- | --------------------------------------------------------- |
| 1   | SCLK 频率   | Master 选择 Slave 可接受的频率                                    |
| 2   | Slave 选择  | Master 选择需要操作的 Slave，通过 SS_n 信号                           |
| 3   | 传输位数（bit） | 一般为 2 的幂次，也可以作为任意正整数                                      |
| 4   | 传输位序      | 先发送高 bit（MSB，默认），还是先发送低 bit（LSB）                          |
| 5   | CPOL      | 时间沿极性（polarity）0：SCLK 的前沿为上升沿，后沿为下降沿1：SCLK 的前言为下降沿，后沿为上升沿 |
| 6   | CPHA      | 时钟相位（phase）0：发送端在后沿发送数据，接收端用前沿接收数据1：发送端在前沿发送数据，接收端用后沿接收数据 |
| 7   | 启停间隔      | 在启动传输时，Master 等待主从设备都准备好传输在停止传输时，Master 等待主从设备都已传输完成      |

SPI 是一种高速且高效的通信协议，常用于传输数据如传感器数据、音频信号等。

## CAN（Controller Area Network）

CAN 是一种高效的通信协议，广泛应用于汽车、工业控制等领域，用于实时数据交换。

| 编号  | 配置信息  | 描述                                   |
| --- | ----- | ------------------------------------ |
| 1   | 波特率   | 数据传输的速率，通常为 125kbps、500kbps、1Mbps 等。 |
| 2   | 发送优先级 | 消息的优先级决定了在总线上竞争时的发送顺序，优先级高的消息先发送。    |
| 3   | 消息类型  | 标准帧、扩展帧，区别在于消息 ID 的位数。               |

CAN 协议适合于需要实时性和高可靠性的场合，能够在有多个节点的网络中高效地传输数据。

## Ethernet（以太网）

以太网是最常见的局域网通信协议，广泛用于计算机网络、工业自动化等领域。

|编号|配置信息|描述|
|---|---|---|
|1|速率|网络连接的速率，如 10Mbps、100Mbps、1Gbps 等。|
|2|双工模式|半双工或全双工，决定了数据传输的方向性。|
|3|MTU（最大传输单元）|网络中数据包的最大长度，通常为 1500 字节。|

Ethernet 提供高速且可靠的数据传输，适合大规模网络通信。

## ADC（Analog-to-Digital Converter）

ADC（模拟到数字转换器）用于将模拟信号转换为数字信号，广泛应用于信号采集和传感器数据读取。

| 编号  | 配置信息 | 描述                             |
| --- | ---- | ------------------------------ |
| 1   | 分辨率  | ADC 的分辨率，通常为 8 位、10 位、12 位或更高。 |
| 2   | 采样速率 | 每秒钟采样的次数，通常越高越能提供更精确的数字化结果。    |
| 3   | 输入范围 | ADC 输入的电压范围，决定了模拟信号的动态范围。      |

ADC 的配置直接影响系统对模拟信号的采集精度，常用于温度传感器、光传感器等。

## DAC（Digital-to-Analog Converter）

DAC（数字到模拟转换器）将数字信号转换为模拟信号，广泛应用于音频输出、信号生成等领域。

| 编号  | 配置信息 | 描述                                                |
| --- | ---- | ------------------------------------------------- |
| 1   | 采样速率 | DAC 输出模拟信号的速率，通常为样本每秒。较高的采样速率可以更精确地复现模拟信号。        |
| 2   | 分辨率  | DAC 输出的精度，通常为 8 位、10 位、12 位或更高。分辨率越高，模拟输出信号的质量越高。 |
| 3   | 参考电压 | DAC 的参考电压决定了输出信号的电压范围。常见的参考电压有 3.3V 或 5V。         |
| 4   | 输出模式 | DAC 的输出模式可以是单通道输出或差分输出，具体选择取决于应用需求。               |
| 5   | 输出缓冲 | 一些 DAC 提供输出缓冲功能，可以提高输出信号的驱动能力，减少信号的衰减。            |

## DMA（Direct Memory Access）

DMA（直接内存访问）允许外设与内存直接交换数据，减少 CPU 干预，从而提高系统的效率。

| 编号  | 配置信息 | 描述                                          |
| --- | ---- | ------------------------------------------- |
| 1   | 通道数  | DMA 通道的数量，通常用于支持多个外设的并行数据传输。                |
| 2   | 传输方向 | 数据传输的方向，可以是外设到内存（外设写入内存），或内存到外设（内存写入外设）。    |
| 3   | 传输大小 | 每次 DMA 传输的数据大小，通常是字节、半字或字（如 8 位、16 位、32 位）。 |
| 4   | 触发源  | DMA 传输的触发源，可以是外部事件（如外设中断）或定时器等。             |
| 5   | 启动模式 | DMA 启动的模式，通常为单次传输或循环传输。                     |
| 6   | 完成中断 | DMA 完成传输后，可以通过中断通知 CPU，通常配置 DMA 中断请求（IRQ）。  |

DMA 可以提高数据传输效率，减少 CPU 的负担，广泛应用于高速数据流的传输。

## PWM（Pulse Width Modulation）

PWM（脉冲宽度调制）用于模拟信号编码，它通过控制数字信号的占空比来模拟不同的电压水平。广泛应用于电机控制、调光、音频信号等。

|编号|配置信息|描述|
|---|---|---|
|1|脉冲宽度|高电平的时间，占脉冲周期的比例就是占空比|
|2|脉冲周期|1 秒内脉冲频率个数的倒数|
|3|电压高度|例如 0V - 5V|

通过调整 PWM 的占空比，可以控制模拟负载的电压和电流，例如调节 LED 的亮度或电机的转速。