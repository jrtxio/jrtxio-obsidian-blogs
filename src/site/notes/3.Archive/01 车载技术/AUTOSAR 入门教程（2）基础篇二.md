---
{"dg-publish":true,"dg-path":"01 车载技术/AUTOSAR 入门教程（2）基础篇二.md","permalink":"/01 车载技术/AUTOSAR 入门教程（2）基础篇二/"}
---

#Innolight #AutoSAR 

🚀 **AUTOSAR** 作为汽车电子系统开发的行业标准，其**基础软件（BSW）**的模块化设计是提升 ECU 开发效率的关键。本文将深入解析 BSW 的分层架构和配置机制，帮助开发者理解如何通过标准化接口实现软硬件解耦。💡

## 🏗️ 基础软件的分层架构

### 🔍 按功能划分的堆栈结构
AUTOSAR **基础软件**根据服务类型划分为三大核心堆栈：
- 📡 **通信堆栈**  
  🔹 包含通信驱动程序（CAN/LIN 等）  
  🔹 通信接口（PDU Router）  
  🔹 通信服务（COM 模块）
- 💾 **内存堆栈**  
  🔹 由内存驱动程序（Flash/EEPROM）  
  🔹 内存接口（MemIf）  
  🔹 内存服务（NvM）组成
- 🔌 **I/O 堆栈**  
  🔹 包括 I/O 驱动程序（DIO/ADC）  
  🔹 I/O 抽象层（Port 模块）

![Pasted image 20250712233413.png|650](/img/user/0.Asset/resource/Pasted%20image%2020250712233413.png)

## 🤝 模块间的接口规范

### 1️⃣ AUTOSAR 接口
- 🌐 **语言无关性**：独立于编程语言和硬件平台
- 🎯 **应用场景**：用于 SWC 与 BSW 之间的数据交换
- ⚙️ **实现方式**：通过端口（Port）机制实现组件连接

### 2️⃣ 标准化 AUTOSAR 接口
- 📜 **官方定义**：语法和语义由 AUTOSAR 标准严格规定
- 🏭 **典型应用**：提供 BSW 的标准服务（如诊断服务 DCM）

### 3️⃣ 标准化接口
- 💻 **语言相关**：基于特定编程语言（通常为 C）
- 🔄 **使用范围**：同一 ECU 内部模块间的交互
- 📌 **示例**：EcuM 与 BswM 之间的调度接口

## ⚙️ 配置机制的三种类型

### 🔧 预编译配置（Pre-compile）
- 📂 **配置文件**：`*_Cfg.c/h`  
- 💡 **特点**：
  - 通过宏定义实现条件编译
  - 编译后配置固定不可修改
  - 优化代码体积和执行效率

### 🔗 链接时配置（Link time）
- 📂 **配置文件**：`*_Lcfg.c/h`  
- 🛠️ **实现方式**：
  - 通过外部常量传递配置
  - 链接阶段完成最终配置
  - 典型应用：内存分区配置

### 🔄 构建后配置（Post-build）
- 📂 **配置文件**：`*_PBcfg.c/h`  
- 🚀 **两种模式**：
  1. **可加载式**：动态修改配置结构成员
  2. **可选式**：从预定义配置集中选择（结构数组形式）
- ✅ **核心优势**：同一 ECU 可适配不同车型配置

## 💡 实践建议
1️⃣ 优先使用**标准化 AUTOSAR 接口**保证兼容性  
2️⃣ 对实时性要求高的模块采用**预编译配置**  
3️⃣ 需要多车型适配时选择**构建后可选项配置**  
4️⃣ 通过 `*_Cfg.h` 文件快速定位模块配置项